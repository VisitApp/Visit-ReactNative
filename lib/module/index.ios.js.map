{"version":3,"names":["axios","React","useRef","useEffect","useState","useCallback","useMemo","StyleSheet","SafeAreaView","NativeModules","NativeEventEmitter","Linking","Platform","ActivityIndicator","Alert","WebView","DeviceInfo","getWebViewLink","LINKING_ERROR","select","ios","default","escapeChars","lt","gt","quot","apos","amp","unescapeHTML","str","replace","entity","entityCode","match","String","fromCharCode","parseInt","VisitHealthView","magicLinkBaseUrl","errorBaseUrl","token","id","phone","environment","moduleName","magicLink","isLoggingEnabled","source","setSource","loading","setLoading","trim","length","systemVersion","getSystemVersion","version","getVersion","getUniqueId","then","uniqueId","res","data","result","console","log","catch","err","errorMessage","errMessage","errorUrl","finally","VisitHealthRn","Proxy","get","Error","webviewRef","apiBaseUrl","setApiBaseUrl","authToken","setAuthToken","hasLoadedOnce","setHasLoadedOnce","callSyncApi","post","headers","Authorization","callEmbellishApi","apiManagerEmitter","subscription","addListener","reminder","callSyncData","remove","handleMessage","event","JSON","parse","nativeEvent","method","type","frequency","timestamp","authtoken","googleFitLastSync","gfHourlyLastSync","url","current","injectJavaScript","connectToAppleHealth","sleepTime","numberOfSteps","renderGraph","results","updateApiUrl","openURL","styles","webViewContainer","uri","webView","create","flex","backgroundColor","defaultProps","fetchHourlyFitnessData","Promise","resolve","reject","fetchHourlyData","Array","isArray","fetchDailyFitnessData","fetchDailyData","LoadingIndicator","zIndex","position","opacity","width","height","justifyContent","alignItems"],"sources":["index.ios.js"],"sourcesContent":["import axios from 'axios';\nimport React, {\n  useRef,\n  useEffect,\n  useState,\n  useCallback,\n  useMemo,\n} from 'react';\nimport {\n  StyleSheet,\n  SafeAreaView,\n  NativeModules,\n  NativeEventEmitter,\n  Linking,\n  Platform,\n  ActivityIndicator,\n  Alert,\n} from 'react-native';\nimport { WebView } from 'react-native-webview';\nimport DeviceInfo from 'react-native-device-info';\nimport { getWebViewLink } from './Services';\n\nconst LINKING_ERROR =\n  \"The package 'Visit-ReactNative' doesn't seem to be linked. Make sure: \\n\\n\" +\n  Platform.select({ ios: \"- You have run 'pod install'\\n\", default: '' }) +\n  '- You rebuilt the app after installing the package\\n' +\n  '- You are not using Expo managed workflow\\n';\n\nconst escapeChars = {\n  lt: '<',\n  gt: '>',\n  quot: '\"',\n  apos: \"'\",\n  amp: '&',\n};\n\nconst unescapeHTML = (str) =>\n  // modified from underscore.string and string.js\n  str.replace(/\\&([^;]+);/g, (entity, entityCode) => {\n    let match;\n\n    if (entityCode in escapeChars) {\n      return escapeChars[entityCode];\n    } else if ((match = entityCode.match(/^#x([\\da-fA-F]+)$/))) {\n      return String.fromCharCode(parseInt(match[1], 16));\n    } else if ((match = entityCode.match(/^#(\\d+)$/))) {\n      return String.fromCharCode(~~match[1]);\n    } else {\n      return entity;\n    }\n  });\n\nconst VisitHealthView = ({\n  magicLinkBaseUrl,\n  errorBaseUrl,\n  token,\n  id,\n  phone,\n  environment,\n  moduleName,\n  magicLink,\n  isLoggingEnabled,\n}) => {\n  const [source, setSource] = useState('');\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    if (magicLink?.trim()?.length) {\n      setSource(magicLink);\n      setLoading(false)\n    } else {\n      const systemVersion = DeviceInfo.getSystemVersion();\n      const version = DeviceInfo.getVersion();\n      DeviceInfo.getUniqueId()\n        .then((uniqueId) =>\n          getWebViewLink(\n            magicLinkBaseUrl,\n            token,\n            phone,\n            id,\n            'iPhone',\n            uniqueId,\n            version,\n            systemVersion,\n            environment\n          )\n        )\n        .then((res) => {\n          let magicLink = res.data.result;\n          if (moduleName?.trim()?.length) {\n            magicLink += `&tab=${moduleName?.trim()}`;\n          }\n          if (isLoggingEnabled) {\n            console.log('webviewlink is', { magicLink });\n          }\n          setSource(magicLink);\n        })\n        .catch((err) => {\n          const errorMessage = err.errMessage;\n          const errorUrl = `${errorBaseUrl}/star-health?error=${errorMessage}`;\n          setSource(errorUrl);\n          if (isLoggingEnabled) {\n            console.log('webviewlink is', { errorUrl });\n          }\n        })\n        .finally(() => {\n          setLoading(false);\n        });\n    }\n  }, [\n    id,\n    token,\n    magicLinkBaseUrl,\n    errorBaseUrl,\n    phone,\n    environment,\n    moduleName,\n    magicLink,\n    isLoggingEnabled,\n  ]);\n\n  const VisitHealthRn = useMemo(\n    () =>\n      NativeModules.VisitHealthRn\n        ? NativeModules.VisitHealthRn\n        : new Proxy(\n            {},\n            {\n              get() {\n                throw new Error(LINKING_ERROR);\n              },\n            }\n          ),\n    []\n  );\n\n  const webviewRef = useRef(null);\n  const [apiBaseUrl, setApiBaseUrl] = useState('');\n  const [authToken, setAuthToken] = useState('');\n  const [hasLoadedOnce, setHasLoadedOnce] = useState(false);\n\n  const callSyncApi = useCallback(\n    (data) =>\n      axios\n        .post(`${apiBaseUrl}/users/data-sync`, data, {\n          headers: {\n            Authorization: authToken,\n          },\n        })\n        .then((res) => console.log('callSyncData response,', res))\n        .catch((err) => console.log('callSyncData err,', { err })),\n    [apiBaseUrl, authToken]\n  );\n\n  const callEmbellishApi = useCallback(\n    (data) =>\n      axios\n        .post(`${apiBaseUrl}/users/embellish-sync`, data, {\n          headers: {\n            Authorization: authToken,\n          },\n        })\n        .then((res) => console.log('callEmbellishApi response,', res))\n        .catch((err) => console.log('callEmbellishApi err,', { err })),\n    [apiBaseUrl, authToken]\n  );\n\n  useEffect(() => {\n    const apiManagerEmitter = new NativeEventEmitter(VisitHealthRn);\n    const subscription = apiManagerEmitter.addListener(\n      'EventReminder',\n      (reminder) => {\n        if (reminder?.callSyncData && reminder?.callSyncData?.length) {\n          callSyncApi(reminder?.callSyncData[0]);\n        }\n        if (reminder?.callEmbellishApi && reminder?.callEmbellishApi?.length) {\n          callEmbellishApi(reminder?.callEmbellishApi[0]);\n        }\n      }\n    );\n    return () => {\n      subscription.remove();\n    };\n  }, [VisitHealthRn, callEmbellishApi, callSyncApi]);\n\n  const handleMessage = async (event) => {\n    const data = JSON.parse(unescapeHTML(event.nativeEvent.data));\n    const {\n      method,\n      type,\n      frequency,\n      timestamp,\n      apiBaseUrl,\n      authtoken,\n      googleFitLastSync,\n      gfHourlyLastSync,\n      url,\n    } = data;\n    console.log('handleMessage data is', data);\n    console.log(unescapeHTML(event.nativeEvent.data));\n    switch (method) {\n      case 'UPDATE_PLATFORM':\n        webviewRef.current?.injectJavaScript('window.setSdkPlatform(\"IOS\")');\n        break;\n      case 'CONNECT_TO_GOOGLE_FIT':\n        VisitHealthRn?.connectToAppleHealth((res) => {\n          if (res?.sleepTime || res?.numberOfSteps) {\n            webviewRef.current?.injectJavaScript(\n              `window.updateFitnessPermissions(true,${res?.numberOfSteps},${res?.sleepTime})`\n            );\n          } else {\n            webviewRef.current?.injectJavaScript(\n              'window.updateFitnessPermissions(true,0,0)'\n            );\n          }\n        });\n        break;\n      case 'GET_DATA_TO_GENERATE_GRAPH':\n        VisitHealthRn?.renderGraph(\n          { type, frequency, timestamp },\n          (err, results) => {\n            if (err) {\n              console.log('error initializing Healthkit: ', err);\n              return;\n            }\n            if (results[0]) {\n              console.log('results initializing Healthkit: ', results[0]);\n              webviewRef.current?.injectJavaScript(`window.${results[0]}`);\n            }\n          }\n        );\n        break;\n      case 'UPDATE_API_BASE_URL':\n        if (!hasLoadedOnce) {\n          console.log('apiBaseUrl is,', apiBaseUrl);\n          setApiBaseUrl(apiBaseUrl);\n          setAuthToken(authtoken);\n          VisitHealthRn?.updateApiUrl({ googleFitLastSync, gfHourlyLastSync });\n          setHasLoadedOnce(true);\n        }\n        break;\n\n      case 'OPEN_PDF':\n        Linking.openURL(url);\n        break;\n      case 'CLOSE_VIEW':\n        break;\n      case 'GET_LOCATION_PERMISSIONS':\n        webviewRef.current?.injectJavaScript(\n          'window.checkTheGpsPermission(true)'\n        );\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  console.log('source: ', source);\n\n  return (\n    <SafeAreaView style={styles.webViewContainer}>\n      {loading ? (\n        <LoadingIndicator />\n      ) : (\n        <WebView\n          ref={webviewRef}\n          source={{ uri: source }}\n          style={styles.webView}\n          javascriptEnabled\n          onMessage={handleMessage}\n        />\n      )}\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  webViewContainer: {\n    flex: 1,\n    backgroundColor: 'white',\n  },\n  webView: {\n    flex: 1,\n  },\n});\n\nVisitHealthView.defaultProps = {\n  id: '',\n  token: '',\n  magicLinkBaseUrl: '',\n  errorBaseUrl: '',\n  phone: '',\n  moduleName: '',\n};\n\nexport default VisitHealthView;\n\nexport const fetchHourlyFitnessData = (timestamp) => {\n  return new Promise((resolve, reject) => {\n    NativeModules?.VisitHealthRn?.fetchHourlyData(timestamp)\n      .then((res) => {\n        if (Array.isArray(res) && res.length) {\n          resolve(res[0]);\n        } else {\n          reject('Error fetching hourly data');\n        }\n      })\n      .catch((err) => reject(err));\n  });\n};\n\nexport const fetchDailyFitnessData = (timestamp) => {\n  return new Promise((resolve, reject) => {\n    NativeModules?.VisitHealthRn?.fetchDailyData(timestamp)\n      .then((res) => {\n        if (Array.isArray(res) && res.length) {\n          resolve(res[0]);\n        } else {\n          reject('Error fetching daily data');\n        }\n      })\n      .catch((err) => reject(err));\n  });\n};\n\nconst LoadingIndicator = () => {\n  return (\n    <ActivityIndicator\n      color=\"#000\"\n      size=\"small\"\n      style={{\n        flex: 1,\n        zIndex: 100,\n        position: 'absolute',\n        backgroundColor: '#fff',\n        opacity: 0.4,\n        width: '100%',\n        height: '100%',\n        justifyContent: 'center',\n        alignItems: 'center',\n      }}\n    />\n  );\n};\n"],"mappings":"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"}