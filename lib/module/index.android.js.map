{"version":3,"names":["React","useRef","useEffect","useState","useCallback","SafeAreaView","NativeModules","PermissionsAndroid","BackHandler","Linking","WebView","LocationEnabler","DeviceInfo","axios","PRIORITIES","HIGH_ACCURACY","useLocationSettings","addListener","VisitHealthView","magicLinkBaseUrl","errorBaseUrl","token","id","phone","moduleName","environment","magicLink","isLoggingEnabled","source","setSource","trim","length","getAndroidId","then","deviceId","buildNumber","getBuildNumber","systemVersion","getSystemVersion","version","getVersion","console","log","finalEndPoint","post","sId","srcClientId","appVersion","deviceVersion","userEnv","response","data","visitMagicLink","result","errorMessage","message","errorUrl","catch","error","err","enabled","requestResolution","priority","alwaysShow","needBle","webviewRef","requestActivityRecognitionPermission","granted","request","PERMISSIONS","ACTIVITY_RECOGNITION","title","buttonNeutral","buttonNegative","buttonPositive","RESULTS","GRANTED","askForGoogleFitPermission","warn","requestLocationPermission","ACCESS_FINE_LOCATION","finalString","current","injectJavaScript","e","VisitFitnessModule","initiateSDK","isPermissionGranted","askForFitnessPermission","getDailyFitnessData","requestDailyFitnessData","requestActivityData","type","frequency","timeStamp","requestActivityDataFromGoogleFit","updateApiBaseUrl","apiBaseUrl","authtoken","googleFitLastSync","gfHourlyLastSync","runBeforeFirst","handleMessage","event","nativeEvent","parsedObject","JSON","parse","method","parseInt","timestamp","pdfUrl","url","openURL","exception","canGoBack","setCanGoBack","handleBack","goBack","gpsListener","locationEnabled","addEventListener","removeEventListener","remove","flex","uri","headers","platform","fetchDailyFitnessData","startTimeStamp","Promise","resolve","reject","fetchHourlyFitnessData","defaultProps"],"sources":["index.android.js"],"sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from 'react';\n\nimport {\n  SafeAreaView,\n  NativeModules,\n  PermissionsAndroid,\n  BackHandler,\n  Linking,\n} from 'react-native';\n\nimport WebView from 'react-native-webview';\n\nimport LocationEnabler from 'react-native-location-enabler';\n\nimport DeviceInfo from 'react-native-device-info';\n\nimport axios from 'axios';\n\nconst {\n  PRIORITIES: { HIGH_ACCURACY },\n  useLocationSettings,\n  addListener,\n} = LocationEnabler;\n\nconst VisitHealthView = ({\n  magicLinkBaseUrl,\n  errorBaseUrl,\n  token,\n  id,\n  phone,\n  moduleName,\n  environment,\n  magicLink,\n  isLoggingEnabled,\n}) => {\n  const [source, setSource] = useState('');\n  useEffect(() => {\n    if ((magicLink?.trim()?.length || 0) > 0) {\n      setSource(magicLink);\n    } else {\n      DeviceInfo.getAndroidId()\n        .then((deviceId) => {\n          var buildNumber = DeviceInfo.getBuildNumber();\n          let systemVersion = DeviceInfo.getSystemVersion();\n          let version = DeviceInfo.getVersion();\n\n          if (isLoggingEnabled) {\n            console.log(\n              'buildNumber:' +\n                buildNumber +\n                ' systemVersion:' +\n                systemVersion +\n                ' version : ' +\n                version +\n                ' deviceId',\n              deviceId\n            );\n          }\n\n          var finalEndPoint = `${magicLinkBaseUrl}/partners/v2/generate-magic-link-star-health`;\n\n          if (isLoggingEnabled) {\n            console.log('finalEndPoint: ' + finalEndPoint);\n          }\n\n          axios\n            .post(finalEndPoint, {\n              token: token,\n              phone: phone,\n              sId: id,\n              srcClientId: 'Android',\n              deviceId: deviceId,\n              appVersion: version,\n              deviceVersion: systemVersion,\n              userEnv: environment,\n            })\n            .then((response) => {\n              var data = response.data;\n              var visitMagicLink = data.result;\n              var errorMessage = data.errorMessage;\n\n              if (data.message === 'success') {\n                if ((moduleName?.trim()?.length || 0) > 0) {\n                  visitMagicLink += `&tab=${moduleName}`;\n                }\n\n                if (isLoggingEnabled) {\n                  console.log('magicLink: ' + visitMagicLink);\n                }\n\n                setSource(visitMagicLink);\n              } else {\n                var errorUrl = `${errorBaseUrl}/star-health?error=${errorMessage}`;\n                setSource(errorUrl);\n\n                if (isLoggingEnabled) {\n                  console.log(\n                    'erorMessage: ' +\n                      data.errorMessage +\n                      ' errorUrl: ' +\n                      errorUrl\n                  );\n                }\n              }\n            })\n            .catch((error) => {\n              if (isLoggingEnabled) {\n                console.log('error: ' + error);\n              }\n            });\n        })\n        .catch((err) => {\n          if (isLoggingEnabled) {\n            console.log('getDeviceInfo err', err);\n          }\n        });\n    }\n  }, [\n    id,\n    token,\n    magicLinkBaseUrl,\n    errorBaseUrl,\n    phone,\n    moduleName,\n    environment,\n    magicLink,\n    isLoggingEnabled,\n  ]);\n\n  const [enabled, requestResolution] = useLocationSettings(\n    {\n      priority: HIGH_ACCURACY, // default BALANCED_POWER_ACCURACY\n      alwaysShow: true, // default false\n      needBle: true, // default false\n    },\n    false /* optional: default undefined */\n  );\n\n  const webviewRef = useRef(null);\n\n  const requestActivityRecognitionPermission = async () => {\n    console.log('inside requestActivityRecognitionPermission()');\n    try {\n      const granted = await PermissionsAndroid.request(\n        PermissionsAndroid.PERMISSIONS.ACTIVITY_RECOGNITION,\n        {\n          title: 'Need Activity Recognition Permission',\n          message: 'This needs access to your Fitness Permission',\n          buttonNeutral: 'Ask Me Later',\n          buttonNegative: 'Cancel',\n          buttonPositive: 'OK',\n        }\n      );\n      if (granted === PermissionsAndroid.RESULTS.GRANTED) {\n        console.log('ACTIVITY_RECOGNITION granted');\n        askForGoogleFitPermission();\n      } else {\n        console.log('Fitness permission denied');\n      }\n    } catch (err) {\n      console.warn(err);\n    }\n  };\n\n  const requestLocationPermission = async () => {\n    try {\n      const granted = await PermissionsAndroid.request(\n        PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,\n        {\n          title: 'Need Location Permission',\n          message: 'Need access to location permission',\n          buttonNeutral: 'Ask Me Later',\n          buttonNegative: 'Cancel',\n          buttonPositive: 'OK',\n        }\n      );\n      if (granted === PermissionsAndroid.RESULTS.GRANTED) {\n        console.log('Location permission granted');\n\n        if (!enabled) {\n          requestResolution();\n        } else {\n          var finalString = `window.checkTheGpsPermission(true)`;\n          console.log('requestLocationPermission: ' + finalString);\n\n          webviewRef.current?.injectJavaScript(finalString);\n        }\n      } else {\n        console.log('Location permission denied');\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const askForGoogleFitPermission = async () => {\n    try {\n      NativeModules.VisitFitnessModule.initiateSDK(isLoggingEnabled);\n\n      const isPermissionGranted =\n        await NativeModules.VisitFitnessModule.askForFitnessPermission();\n      if (isPermissionGranted == 'GRANTED') {\n        getDailyFitnessData();\n      }\n      console.log(`Google Fit Permissionl: ${isPermissionGranted}`);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const getDailyFitnessData = () => {\n    console.log('getDailyFitnessData() called');\n\n    NativeModules.VisitFitnessModule.requestDailyFitnessData((data) => {\n      // console.log(`getDailyFitnessData() data: ` + data);\n      webviewRef.current?.injectJavaScript(data);\n    });\n  };\n\n  const requestActivityData = (type, frequency, timeStamp) => {\n    console.log('requestActivityData() called');\n\n    NativeModules.VisitFitnessModule.requestActivityDataFromGoogleFit(\n      type,\n      frequency,\n      timeStamp,\n      (data) => {\n        // console.log(`requestActivityData() data: ` + data);\n        webviewRef.current?.injectJavaScript('window.' + data);\n      }\n    );\n  };\n\n  const updateApiBaseUrl = (\n    apiBaseUrl,\n    authtoken,\n    googleFitLastSync,\n    gfHourlyLastSync\n  ) => {\n    console.log('updateApiBaseUrl() called.');\n    NativeModules.VisitFitnessModule.initiateSDK(isLoggingEnabled);\n\n    NativeModules.VisitFitnessModule.updateApiBaseUrl(\n      apiBaseUrl,\n      authtoken,\n      googleFitLastSync,\n      gfHourlyLastSync\n    );\n  };\n\n  const runBeforeFirst = `\n        window.isNativeApp = true;\n        window.platform = \"ANDROID\";\n        window.setSdkPlatform('ANDROID');\n        true; // note: this is required, or you'll sometimes get silent failures\n    `;\n\n  const handleMessage = (event) => {\n    if (event.nativeEvent.data != null) {\n      try {\n        // console.log(\"Event :\"+event.nativeEvent.data);\n        const parsedObject = JSON.parse(event.nativeEvent.data);\n        if (parsedObject.method != null) {\n          switch (parsedObject.method) {\n            case 'CONNECT_TO_GOOGLE_FIT':\n              if (parseInt(DeviceInfo.getSystemVersion(), 10) >= 10) {\n                requestActivityRecognitionPermission();\n              } else {\n                askForGoogleFitPermission();\n              }\n              break;\n            case 'UPDATE_PLATFORM':\n              webviewRef.current?.injectJavaScript(\n                'window.setSdkPlatform(\"ANDROID\")'\n              );\n              break;\n            case 'UPDATE_API_BASE_URL':\n              {\n                let apiBaseUrl = parsedObject.apiBaseUrl;\n                let authtoken = parsedObject.authtoken;\n\n                let googleFitLastSync = parsedObject.googleFitLastSync;\n                let gfHourlyLastSync = parsedObject.gfHourlyLastSync;\n\n                console.log(\n                  'apiBaseUrl: ' +\n                    'NOT SHOWN' +\n                    ' authtoken: ' +\n                    'NOT SHOWN' +\n                    ' googleFitLastSync: ' +\n                    googleFitLastSync +\n                    ' gfHourlyLastSync: ' +\n                    gfHourlyLastSync\n                );\n\n                updateApiBaseUrl(\n                  apiBaseUrl,\n                  authtoken,\n                  googleFitLastSync,\n                  gfHourlyLastSync\n                );\n              }\n              break;\n            case 'GET_DATA_TO_GENERATE_GRAPH':\n              {\n                let type = parsedObject.type;\n                let frequency = parsedObject.frequency;\n                let timeStamp = parsedObject.timestamp;\n\n                console.log(\n                  'type: ' +\n                    type +\n                    ' frequency:' +\n                    frequency +\n                    ' timeStamp: ' +\n                    timeStamp\n                );\n\n                requestActivityData(type, frequency, timeStamp);\n              }\n              break;\n            case 'GET_LOCATION_PERMISSIONS':\n              {\n                requestLocationPermission();\n              }\n              break;\n            case 'OPEN_PDF':\n              {\n                let pdfUrl = parsedObject.url;\n                // console.log(\"pdfUrl \"+pdfUrl);\n\n                Linking.openURL(pdfUrl);\n              }\n              break;\n            case 'CLOSE_VIEW':\n              {\n              }\n              break;\n\n            default:\n              break;\n          }\n        }\n      } catch (exception) {\n        console.log('Exception occured:' + exception.message);\n      }\n    }\n  };\n\n  const [canGoBack, setCanGoBack] = useState(false);\n\n  const handleBack = useCallback(() => {\n    if (canGoBack && webviewRef.current) {\n      webviewRef.current?.goBack();\n      return true;\n    }\n    return false;\n  }, [canGoBack]);\n\n  useEffect(() => {\n    const gpsListener = addListener(({ locationEnabled }) => {\n      if (locationEnabled) {\n        var finalString = `window.checkTheGpsPermission(true)`;\n\n        console.log('listener: ' + finalString);\n\n        webviewRef.current?.injectJavaScript(finalString);\n      }\n    });\n\n    BackHandler.addEventListener('hardwareBackPress', handleBack);\n    return () => {\n      BackHandler.removeEventListener('hardwareBackPress', handleBack);\n      gpsListener.remove();\n    };\n  }, [handleBack]);\n\n  return (\n    <SafeAreaView style={{ flex: 1 }}>\n      {source ? (\n        <WebView\n          ref={webviewRef}\n          source={{\n            uri: source,\n            headers: {\n              platform: 'ANDROID',\n            },\n          }}\n          onMessage={handleMessage}\n          injectedJavaScriptBeforeContentLoaded={runBeforeFirst}\n          javaScriptEnabled={true}\n          onLoadProgress={(event) => setCanGoBack(event.nativeEvent.canGoBack)}\n        />\n      ) : null}\n    </SafeAreaView>\n  );\n};\n\nexport const fetchDailyFitnessData = (startTimeStamp, isLoggingEnabled) => {\n  return new Promise((resolve, reject) => {\n    console.log('fetchDailyFitnessData called: ' + startTimeStamp);\n\n    NativeModules.VisitFitnessModule.initiateSDK(isLoggingEnabled);\n\n    NativeModules.VisitFitnessModule.fetchDailyFitnessData(startTimeStamp)\n      .then((result) => {\n        resolve(result);\n      })\n      .catch((err) => reject(err));\n  });\n};\n\nexport const fetchHourlyFitnessData = (startTimeStamp, isLoggingEnabled) => {\n  return new Promise((resolve, reject) => {\n    console.log('fetchHourlyFitnessData called: ' + startTimeStamp);\n\n    NativeModules.VisitFitnessModule.initiateSDK(isLoggingEnabled);\n\n    NativeModules.VisitFitnessModule.fetchHourlyFitnessData(startTimeStamp)\n      .then((result) => {\n        resolve(result);\n      })\n      .catch((err) => reject(err));\n  });\n};\n\nexport default VisitHealthView;\n\nVisitHealthView.defaultProps = {\n  id: '',\n  token: '',\n  magicLinkBaseUrl: '',\n  errorBaseUrl: '',\n  phone: '',\n  moduleName: '',\n  environment: '',\n  magicLink: '',\n  isLoggingEnabled: false,\n};\n"],"mappings":"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"}